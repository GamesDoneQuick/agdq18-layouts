<link rel="import" href="../../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../../bower_components/sc-fitted-text/sc-fitted-text.html">
<link rel="import" href="../../../../shared/style/gdq-fui-styles.html">
<link rel="import" href="../../../../shared/style/gdq-text-styles.html">
<link rel="import" href="gdq-nameplate-audio-indicator.html">
<link rel="import" href="gdq-nameplate-result.html">
<link rel="import" href="gdq-nameplate-twitch-logo.html">

<dom-module id="gdq-nameplate">
	<template>
		<style include="gdq-fui-styles gdq-text-styles">
			:host {
				position: absolute;
				display: flex;
				height: 45px;
				font-size: 24px;
				text-transform: uppercase;
				z-index: 1;
				color: white;
				font-family: "Source Code Pro", monospace;
			}

			#main {
				width: calc(var(--gdq-nameplate-width));
				height: 100%;
				align-items: flex-start;
				@apply --layout-horizontal;
				@apply --fui-glow-rect;
			}

			#body {
				position: relative;
				width: calc(100% - 8px);
				height: calc(100% + 2px);
				margin: -1px 4px;
				min-width: 1px; /* needed to prevent overflow */
				flex: 1;
				@apply --fui-glow-rect;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}

			#names {
				position: relative;
				top: -1px;
				display: flex;
				justify-content: center;
				flex: 1;
				white-space: nowrap;
				padding: 0 16px;
				opacity: 0;
				font-weight: 600;
				z-index: 1;
				text-shadow: 0 0 16px rgba(58, 216, 255, 0.8);
			}

			#namesTwitch sc-fitted-text {
				display: inline-block;
				--sc-fitted-text-content: {
					color: transparent;
					background-image: var(--atom-gradient-text-gradient, linear-gradient(
						180deg,
						#FFFFFF 0%,
						#CDCDCD 100%
					));
					-webkit-background-clip: text;
				};
			}

			#twitchLogo {
				display: inline-block;
				margin-right: -12px;
				top: 5px;
			}

			#result {
				position: absolute;
				height: 100%;
				top: 0;
				z-index: -1;
				@apply --fui-glow-rect;
			}

			.dotGreeble {
				position: absolute;
				width: 2px;
				height: 2px;
				background: #00ffff;
			}

			.dotGreeble--top {
				top: 0;
			}

			.dotGreeble--bottom {
				bottom: 0;
			}

			.dotGreeble--left {
				left: 0;
			}

			.dotGreeble--right {
				right: 0;
			}

			:host([no-left-cap]) .dotGreeble--left {
				display: none;
			}

			:host([no-right-cap]) .dotGreeble--right {
				display: none;
			}

			:host([no-left-cap]) #body {
				border-left: 0;
				margin-left: 0;
			}

			:host([no-right-cap]) #body {
				border-right: 0;
				margin-right: 0;
			}

			.hidden {
				position: absolute;
				opacity: 0 !important;
				pointer-events: none;
			}

			[hidden] {
				display: none !important;
			}
		</style>

		<div id="main">
			<div id="body">
				<div class="dotGreeble dotGreeble--top dotGreeble--left"></div>
				<div class="dotGreeble dotGreeble--bottom dotGreeble--left"></div>
				<div class="dotGreeble dotGreeble--top dotGreeble--right"></div>
				<div class="dotGreeble dotGreeble--bottom dotGreeble--right"></div>
				<div id="names">
					<sc-fitted-text id="namesName" text="[[name]]" align="center"></sc-fitted-text>
					<div id="namesTwitch">
						<gdq-nameplate-twitch-logo id="twitchLogo"></gdq-nameplate-twitch-logo>
						<sc-fitted-text text="[[twitch]]" align="left"></sc-fitted-text>
					</div>
				</div>
			</div>

			<gdq-nameplate-audio-indicator
				id="audioIndicator"
				showing="[[audio]]"
				vert-pos="[[audioVertPos]]"
				horiz-pos="[[audioHorizPos]]">
			</gdq-nameplate-audio-indicator>

			<gdq-nameplate-result
				id="result"
				showing="[[finished]]"
				side="[[resultSide]]"
				place="[[place]]"
				first-place="[[firstPlace]]"
				last-place="[[lastPlace]]"
				time="[[time]]">
			</gdq-nameplate-result>
		</div>
	</template>

	<script src="gdq-nameplate.js"></script>
</dom-module>
