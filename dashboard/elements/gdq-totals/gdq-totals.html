<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/nodecg-toast/nodecg-toast.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="gdq-totals-total.html">

<dom-module id="gdq-totals">
	<template>
		<style include="iron-flex iron-flex-alignment">
			:host {
				@apply --layout-horizontal;
				@apply --layout-center;
				@apply --layout-justified;
			}

			#toggleLabel {
				text-transform: uppercase;
				font-size: 12px;
				font-weight: bold;
				margin-bottom: 4px;
				pointer-events: none;
				user-select: none;
				white-space: nowrap;
			}

			#cashTotal {
				margin-right: 13px;
				@apply --layout-flex-1;
			}

			#bitsTotal {
				margin-left: 13px;
				@apply --layout-flex-1;
			}

			#toggle {
				@apply --layout-vertical;
				@apply --layout-center;
				@apply --layout-flex-none;
				margin-left: -14px;
				margin-right: 24px;
			}
		</style>

		<div id="toggle">
			<div id="toggleLabel">Auto Update</div>
			<paper-toggle-button
				on-change="_handleAutoUpdateToggleChange"
				checked="[[autoUpdateTotal]]"></paper-toggle-button>
		</div>

		<gdq-totals-total
			id="cashTotal"
			value="[[cashTotal]]"
			currency="cash"
			on-edit="editCashTotal"></gdq-totals-total>
		<gdq-totals-total
			id="bitsTotal"
			value="[[bitsTotal]]"
			currency="bits"
			on-edit="editBitsTotal"></gdq-totals-total>

		<paper-dialog id="editDialog" with-backdrop>
			<h2>Edit Donation Total</h2>
			<paper-input id="editTotalInput" label="Donation Total" type="number"></paper-input>
			<div class="buttons">
				<paper-button dialog-confirm on-tap="_handleEditDialogConfirmed">Accept</paper-button>
				<paper-button dialog-dismiss autofocus>Cancel</paper-button>
			</div>
		</paper-dialog>

		<nodecg-toast id="toast"></nodecg-toast>
	</template>

	<script src="gdq-totals.js"></script>
</dom-module>
